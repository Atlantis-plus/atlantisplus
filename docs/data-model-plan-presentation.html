<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atlantis Plus: Data Model Evolution</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-tertiary: #1a1a24;
            --text-primary: #f0f0f5;
            --text-secondary: #a0a0b0;
            --text-muted: #606070;
            --cyan: #00d9ff;
            --cyan-glow: rgba(0, 217, 255, 0.3);
            --purple: #a855f7;
            --purple-glow: rgba(168, 85, 247, 0.3);
            --green: #10b981;
            --green-glow: rgba(16, 185, 129, 0.3);
            --red: #ef4444;
            --orange: #f97316;
            --yellow: #eab308;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }

        /* Particle Background */
        #particles-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.4;
        }

        /* Presentation Container */
        .presentation {
            position: relative;
            z-index: 1;
            height: 100vh;
            width: 100vw;
        }

        /* Slide Base */
        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 60px 80px;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
        }

        .slide.active {
            opacity: 1;
            transform: translateX(0);
            pointer-events: all;
        }

        .slide.prev {
            transform: translateX(-100px);
        }

        /* Typography */
        h1 {
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--cyan), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        h2 {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }

        h3 {
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--cyan);
            margin-bottom: 1rem;
        }

        p {
            font-size: 1.25rem;
            line-height: 1.6;
            color: var(--text-secondary);
            max-width: 900px;
        }

        .subtitle {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        /* Code Blocks */
        .code-container {
            background: var(--bg-secondary);
            border: 1px solid var(--bg-tertiary);
            border-radius: 12px;
            padding: 20px;
            max-width: 100%;
            overflow: hidden;
            position: relative;
        }

        .code-header {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .code-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .code-dot.red { background: #ff5f56; }
        .code-dot.yellow { background: #ffbd2e; }
        .code-dot.green { background: #27ca40; }

        .code-content {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: var(--text-secondary);
            white-space: pre;
            overflow-x: auto;
        }

        .code-content .keyword { color: var(--purple); }
        .code-content .function { color: var(--cyan); }
        .code-content .string { color: var(--green); }
        .code-content .comment { color: var(--text-muted); font-style: italic; }
        .code-content .number { color: var(--orange); }

        /* Typing Animation */
        .typing-code {
            overflow: hidden;
            white-space: pre;
        }

        .typing-code.animate {
            animation: typing 3s steps(60, end);
        }

        @keyframes typing {
            from { max-height: 0; }
            to { max-height: 500px; }
        }

        /* Cards */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            width: 100%;
            max-width: 1200px;
        }

        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--bg-tertiary);
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            border-color: var(--cyan);
            box-shadow: 0 10px 40px var(--cyan-glow);
        }

        .card-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--cyan), var(--purple));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
            font-size: 24px;
        }

        .card h4 {
            font-size: 1.25rem;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .card p {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Flip Cards */
        .flip-card {
            perspective: 1000px;
            width: 100%;
            height: 200px;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flip-card:hover .flip-card-inner,
        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front,
        .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 16px;
            padding: 24px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .flip-card-front {
            background: var(--bg-secondary);
            border: 1px solid var(--red);
        }

        .flip-card-back {
            background: var(--bg-secondary);
            border: 1px solid var(--green);
            transform: rotateY(180deg);
        }

        /* Pain Points */
        .pain-point {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: 12px;
            border-left: 4px solid var(--red);
            margin-bottom: 12px;
        }

        .pain-point.solved {
            border-left-color: var(--green);
        }

        .pain-number {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--red);
            min-width: 40px;
        }

        .pain-point.solved .pain-number {
            color: var(--green);
        }

        /* Progress Indicators */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--cyan), var(--purple));
            border-radius: 4px;
            width: 0;
            transition: width 1s ease-out;
        }

        .slide.active .progress-fill {
            width: var(--progress);
        }

        /* Timeline */
        .timeline {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 1000px;
            position: relative;
            padding: 40px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--bg-tertiary);
            transform: translateY(-50%);
        }

        .timeline-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 1;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .timeline-item:hover {
            transform: scale(1.1);
        }

        .timeline-dot {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            border: 3px solid var(--cyan);
            transition: all 0.3s ease;
        }

        .timeline-item.active .timeline-dot {
            background: var(--cyan);
            box-shadow: 0 0 20px var(--cyan-glow);
        }

        .timeline-label {
            position: absolute;
            top: -40px;
            white-space: nowrap;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .timeline-item.active .timeline-label {
            color: var(--cyan);
            font-weight: 600;
        }

        .timeline-content {
            position: absolute;
            bottom: -80px;
            text-align: center;
            max-width: 150px;
            font-size: 0.75rem;
            color: var(--text-muted);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .timeline-item:hover .timeline-content,
        .timeline-item.active .timeline-content {
            opacity: 1;
        }

        /* RFM Calculator */
        .rfm-calculator {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            width: 100%;
            max-width: 1000px;
        }

        .rfm-sliders {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .slider-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            font-size: 1rem;
        }

        .slider-label span:first-child {
            color: var(--cyan);
            font-weight: 500;
        }

        .slider-label span:last-child {
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-primary);
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--bg-tertiary);
            appearance: none;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--cyan);
            cursor: pointer;
            box-shadow: 0 0 10px var(--cyan-glow);
        }

        .rfm-result {
            background: var(--bg-secondary);
            border: 1px solid var(--bg-tertiary);
            border-radius: 16px;
            padding: 32px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .rfm-score {
            font-size: 6rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--cyan), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
        }

        .rfm-tier {
            font-size: 1.5rem;
            margin-top: 16px;
            padding: 8px 24px;
            border-radius: 20px;
            font-weight: 600;
        }

        .tier-strong { background: var(--green); color: var(--bg-primary); }
        .tier-weak { background: var(--yellow); color: var(--bg-primary); }
        .tier-dormant { background: var(--text-muted); color: var(--text-primary); }

        /* Navigation */
        .nav-dots {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 100;
        }

        .nav-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            border: 2px solid var(--text-muted);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-dot:hover {
            border-color: var(--cyan);
        }

        .nav-dot.active {
            background: var(--cyan);
            border-color: var(--cyan);
            box-shadow: 0 0 10px var(--cyan-glow);
        }

        .slide-counter {
            position: fixed;
            bottom: 30px;
            right: 30px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            color: var(--text-muted);
            z-index: 100;
        }

        .slide-counter span {
            color: var(--cyan);
        }

        /* Keyboard Hint */
        .keyboard-hint {
            position: fixed;
            bottom: 30px;
            left: 30px;
            display: flex;
            gap: 8px;
            z-index: 100;
        }

        .key {
            padding: 8px 12px;
            background: var(--bg-secondary);
            border: 1px solid var(--bg-tertiary);
            border-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-p0 { background: var(--red); color: white; }
        .badge-p1 { background: var(--orange); color: white; }
        .badge-p2 { background: var(--yellow); color: var(--bg-primary); }
        .badge-p3 { background: var(--text-muted); color: white; }

        /* Lists */
        .feature-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .feature-list li {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        .feature-list li::before {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--cyan);
            flex-shrink: 0;
        }

        /* Granovetter Diagram */
        .granovetter-diagram {
            display: flex;
            gap: 60px;
            align-items: center;
            margin-top: 40px;
        }

        .tie-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .tie-visual {
            width: 200px;
            height: 200px;
            position: relative;
        }

        .tie-node {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
        }

        .tie-node.you {
            background: var(--cyan);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .tie-edge {
            position: absolute;
            height: 3px;
            background: var(--text-muted);
            top: 50%;
            left: 50%;
            transform-origin: left center;
        }

        .tie-edge.strong {
            height: 5px;
            background: var(--green);
        }

        .tie-edge.weak {
            height: 2px;
            background: var(--purple);
            stroke-dasharray: 5, 5;
        }

        /* Formula Display */
        .formula {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.25rem;
            background: var(--bg-secondary);
            padding: 24px 40px;
            border-radius: 12px;
            border: 1px solid var(--bg-tertiary);
            margin: 20px 0;
        }

        .formula .var {
            color: var(--cyan);
        }

        .formula .op {
            color: var(--purple);
        }

        .formula .num {
            color: var(--orange);
        }

        /* Hover Reveal */
        .hover-reveal {
            position: relative;
            cursor: help;
            border-bottom: 1px dashed var(--cyan);
        }

        .hover-reveal .reveal-content {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-secondary);
            border: 1px solid var(--cyan);
            border-radius: 8px;
            padding: 12px 16px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .hover-reveal:hover .reveal-content {
            opacity: 1;
            visibility: visible;
            bottom: calc(100% + 10px);
        }

        /* Network Graph Container */
        #network-graph {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        /* Two Column Layout */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            width: 100%;
            max-width: 1200px;
        }

        .column {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Phase Header */
        .phase-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .phase-number {
            font-size: 4rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--cyan), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
        }

        /* Sources */
        .source-card {
            background: var(--bg-secondary);
            border: 1px solid var(--bg-tertiary);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .source-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            background: var(--bg-tertiary);
        }

        .source-info h4 {
            font-size: 1rem;
            margin-bottom: 4px;
        }

        .source-info p {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        /* Metrics Grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            width: 100%;
            max-width: 900px;
        }

        .metric-card {
            background: var(--bg-secondary);
            border: 1px solid var(--bg-tertiary);
            border-radius: 16px;
            padding: 32px;
            text-align: center;
        }

        .metric-value {
            font-size: 3rem;
            font-weight: 700;
            color: var(--cyan);
            font-family: 'JetBrains Mono', monospace;
        }

        .metric-label {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        /* Finale CTA */
        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 16px 32px;
            background: linear-gradient(135deg, var(--cyan), var(--purple));
            border: none;
            border-radius: 12px;
            font-size: 1.25rem;
            font-weight: 600;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 32px;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 40px var(--purple-glow);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .animate-in {
            animation: fadeInUp 0.6s ease-out forwards;
        }

        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
        .delay-4 { animation-delay: 0.4s; }
        .delay-5 { animation-delay: 0.5s; }

        /* Centrality Visualization */
        .centrality-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            width: 100%;
            max-width: 900px;
        }

        .centrality-card {
            background: var(--bg-secondary);
            border: 1px solid var(--bg-tertiary);
            border-radius: 16px;
            padding: 24px;
            position: relative;
            overflow: hidden;
        }

        .centrality-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--cyan), var(--purple));
        }

        .centrality-card h4 {
            font-size: 1.25rem;
            margin-bottom: 8px;
            color: var(--cyan);
        }

        .centrality-card p {
            font-size: 0.9rem;
            margin-bottom: 16px;
        }

        .mini-graph {
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .mini-node {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            border: 2px solid var(--text-muted);
            position: relative;
        }

        .mini-node.highlight {
            background: var(--cyan);
            border-color: var(--cyan);
            box-shadow: 0 0 15px var(--cyan-glow);
        }
    </style>
</head>
<body>
    <canvas id="particles-canvas"></canvas>

    <div class="presentation">
        <!-- Slide 1: Title -->
        <div class="slide active" data-slide="1">
            <canvas id="network-graph"></canvas>
            <h1>Atlantis Plus</h1>
            <p class="subtitle">Data Model Evolution</p>
            <p style="text-align: center; max-width: 700px; margin-top: 20px;">
                AI-first Personal Network Memory<br>
                <span style="color: var(--cyan);">8 Phases</span> of data model improvements
            </p>
            <div style="margin-top: 60px; display: flex; gap: 16px;">
                <span class="badge badge-p0">P0 Critical</span>
                <span class="badge badge-p1">P1 Important</span>
                <span class="badge badge-p2">P2 Enhancement</span>
                <span class="badge badge-p3">P3 Future</span>
            </div>
        </div>

        <!-- Slide 2: Problem Overview -->
        <div class="slide" data-slide="2">
            <h2>8 Critical Issues</h2>
            <p class="subtitle" style="margin-bottom: 40px;">Pain points in the current data model</p>

            <div class="two-column">
                <div class="column">
                    <div class="pain-point">
                        <div class="pain-number">01</div>
                        <div>
                            <strong>Silent Identity Conflicts</strong>
                            <p style="font-size: 0.9rem; margin-top: 4px;">Duplicate identities silently ignored, creating orphan records</p>
                        </div>
                    </div>
                    <div class="pain-point">
                        <div class="pain-number">02</div>
                        <div>
                            <strong>No Pre-insertion Dedup</strong>
                            <p style="font-size: 0.9rem; margin-top: 4px;">Duplicates created before dedup runs</p>
                        </div>
                    </div>
                    <div class="pain-point">
                        <div class="pain-number">03</div>
                        <div>
                            <strong>Assertion Duplication on Merge</strong>
                            <p style="font-size: 0.9rem; margin-top: 4px;">"works_at: Google" appears twice after merge</p>
                        </div>
                    </div>
                    <div class="pain-point">
                        <div class="pain-number">04</div>
                        <div>
                            <strong>No Temporal Dimension</strong>
                            <p style="font-size: 0.9rem; margin-top: 4px;">2018 data treated same as 2024</p>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="pain-point">
                        <div class="pain-number">05</div>
                        <div>
                            <strong>Missing Relationship Strength</strong>
                            <p style="font-size: 0.9rem; margin-top: 4px;">No RFM model for tie strength</p>
                        </div>
                    </div>
                    <div class="pain-point">
                        <div class="pain-number">06</div>
                        <div>
                            <strong>Static Edge Weights</strong>
                            <p style="font-size: 0.9rem; margin-top: 4px;">No evidence-based dynamics</p>
                        </div>
                    </div>
                    <div class="pain-point">
                        <div class="pain-number">07</div>
                        <div>
                            <strong>Basic Ranking</strong>
                            <p style="font-size: 0.9rem; margin-top: 4px;">Only similarity, no confidence/relationship</p>
                        </div>
                    </div>
                    <div class="pain-point">
                        <div class="pain-number">08</div>
                        <div>
                            <strong>No Centrality Metrics</strong>
                            <p style="font-size: 0.9rem; margin-top: 4px;">Can't find bridge contacts</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 3: Phase 1 Overview -->
        <div class="slide" data-slide="3">
            <div class="phase-header">
                <span class="phase-number">1</span>
                <div>
                    <span class="badge badge-p0">P0 Critical</span>
                    <h2 style="margin-bottom: 0; margin-top: 8px;">Critical Bug Fixes</h2>
                </div>
            </div>

            <div class="card-grid" style="margin-top: 40px;">
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <h4 style="color: var(--red);">BEFORE: Silent Conflicts</h4>
                            <p style="font-size: 0.9rem; margin-top: 8px;">
                                When email exists for a different person, the new person is created but NOT linked.
                                Creates orphan records silently.
                            </p>
                        </div>
                        <div class="flip-card-back">
                            <h4 style="color: var(--green);">AFTER: Conflict Detection</h4>
                            <p style="font-size: 0.9rem; margin-top: 8px;">
                                Pre-check before insert. Log conflicts to <code>identity_conflict</code> table.
                                Option for auto-merge or manual review.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <h4 style="color: var(--red);">BEFORE: Post-hoc Dedup</h4>
                            <p style="font-size: 0.9rem; margin-top: 8px;">
                                People created without checking if similar person exists.
                                Dedup runs AFTER, duplicates already in DB.
                            </p>
                        </div>
                        <div class="flip-card-back">
                            <h4 style="color: var(--green);">AFTER: Pre-insertion Check</h4>
                            <p style="font-size: 0.9rem; margin-top: 8px;">
                                Check identities first (highest confidence).
                                Then check name similarity (>0.85).
                                Reuse existing person if match found.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <p style="margin-top: 40px; text-align: center; color: var(--text-muted);">
                Click cards to flip
            </p>
        </div>

        <!-- Slide 4: Phase 1 Code Deep Dive -->
        <div class="slide" data-slide="4">
            <h2>Phase 1: SQL Migration</h2>
            <p class="subtitle">Identity conflict detection function</p>

            <div class="code-container" style="max-width: 900px; margin-top: 20px;">
                <div class="code-header">
                    <div class="code-dot red"></div>
                    <div class="code-dot yellow"></div>
                    <div class="code-dot green"></div>
                    <span style="margin-left: 12px; color: var(--text-muted); font-size: 0.8rem;">20250213100000_identity_conflict_detection.sql</span>
                </div>
                <div class="code-content typing-code">
<span class="keyword">CREATE OR REPLACE FUNCTION</span> <span class="function">find_person_by_identity</span>(
    p_owner_id <span class="keyword">UUID</span>,
    p_namespace <span class="keyword">TEXT</span>,
    p_value <span class="keyword">TEXT</span>
)
<span class="keyword">RETURNS</span> <span class="keyword">UUID</span>
<span class="keyword">LANGUAGE</span> sql <span class="keyword">STABLE</span>
<span class="keyword">AS</span> $$
    <span class="keyword">SELECT</span> p.person_id
    <span class="keyword">FROM</span> identity i
    <span class="keyword">JOIN</span> person p <span class="keyword">ON</span> i.person_id = p.person_id
    <span class="keyword">WHERE</span> i.namespace = p_namespace
      <span class="keyword">AND</span> i.value = p_value
      <span class="keyword">AND</span> p.owner_id = p_owner_id
      <span class="keyword">AND</span> p.status = <span class="string">'active'</span>
    <span class="keyword">LIMIT</span> <span class="number">1</span>;
$$;</div>
            </div>

            <div style="display: flex; gap: 20px; margin-top: 30px;">
                <div class="card" style="flex: 1;">
                    <h4>New Table: identity_conflict</h4>
                    <ul class="feature-list" style="margin-top: 12px;">
                        <li>Tracks conflicts for review</li>
                        <li>resolution: pending, merged, kept_separate</li>
                        <li>RLS-protected per owner</li>
                    </ul>
                </div>
                <div class="card" style="flex: 1;">
                    <h4>Process Change</h4>
                    <ul class="feature-list" style="margin-top: 12px;">
                        <li>Check before INSERT</li>
                        <li>Log conflict if found</li>
                        <li>Auto-merge or flag for review</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 5: Phase 2 - Assertion Dedup -->
        <div class="slide" data-slide="5">
            <div class="phase-header">
                <span class="phase-number">2</span>
                <div>
                    <span class="badge badge-p1">P1 Important</span>
                    <h2 style="margin-bottom: 0; margin-top: 8px;">Assertion Deduplication</h2>
                </div>
            </div>

            <div class="two-column" style="margin-top: 40px;">
                <div class="column">
                    <h3>The Problem</h3>
                    <p>When merging persons A and B, their assertions are simply moved to A.</p>
                    <p style="margin-top: 12px;">If both have "works_at: Google", now A has <strong style="color: var(--red);">2 identical assertions</strong>.</p>

                    <h3 style="margin-top: 30px;">The Solution</h3>
                    <p>Generate a <strong style="color: var(--cyan);">signature</strong> for each assertion:</p>
                    <div class="formula" style="font-size: 1rem;">
                        <span class="var">signature</span> <span class="op">=</span> <span class="function">md5</span>(<span class="var">predicate</span> <span class="op">||</span> <span class="string">'::'</span> <span class="op">||</span> <span class="var">value</span>)
                    </div>
                </div>

                <div class="column">
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-dot red"></div>
                            <div class="code-dot yellow"></div>
                            <div class="code-dot green"></div>
                        </div>
                        <div class="code-content" style="font-size: 0.8rem;">
<span class="comment">-- Trigger to auto-generate signature</span>
<span class="keyword">CREATE TRIGGER</span> tr_assertion_signature
    <span class="keyword">BEFORE INSERT OR UPDATE ON</span> assertion
    <span class="keyword">FOR EACH ROW EXECUTE FUNCTION</span>
        <span class="function">assertion_signature_trigger</span>();

<span class="comment">-- During merge: skip if signature exists</span>
<span class="keyword">IF</span> a.signature <span class="keyword">IN</span> existing_set <span class="keyword">THEN</span>
    <span class="comment">-- Delete duplicate</span>
    <span class="function">DELETE</span> <span class="keyword">FROM</span> assertion
    <span class="keyword">WHERE</span> assertion_id = a.assertion_id;
<span class="keyword">ELSE</span>
    <span class="comment">-- Move to kept person</span>
    <span class="function">UPDATE</span> assertion
    <span class="keyword">SET</span> subject_person_id = keep_id;</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 6: Phase 3 - Temporal Model -->
        <div class="slide" data-slide="6">
            <div class="phase-header">
                <span class="phase-number">3</span>
                <div>
                    <span class="badge badge-p1">P1 Important</span>
                    <h2 style="margin-bottom: 0; margin-top: 8px;">Temporal Model</h2>
                </div>
            </div>

            <p style="text-align: center; max-width: 700px; margin-bottom: 40px;">
                Facts need a time dimension. "Works at Google" from 2018 should be treated differently than 2024.
            </p>

            <div style="display: flex; align-items: center; gap: 40px; margin-bottom: 40px;">
                <div style="flex: 1; text-align: center;">
                    <div style="font-size: 1rem; color: var(--text-muted); margin-bottom: 8px;">valid_from</div>
                    <div style="font-size: 2rem; color: var(--cyan);">2015</div>
                </div>
                <div style="flex: 2; position: relative; height: 8px; background: linear-gradient(90deg, var(--cyan), var(--purple)); border-radius: 4px;">
                    <div style="position: absolute; left: 0; top: -30px; font-size: 0.8rem; color: var(--text-muted);">Start</div>
                    <div style="position: absolute; right: 0; top: -30px; font-size: 0.8rem; color: var(--text-muted);">End</div>
                </div>
                <div style="flex: 1; text-align: center;">
                    <div style="font-size: 1rem; color: var(--text-muted); margin-bottom: 8px;">valid_until</div>
                    <div style="font-size: 2rem; color: var(--purple);">2020</div>
                </div>
            </div>

            <div class="card-grid">
                <div class="card">
                    <h4>New Fields</h4>
                    <ul class="feature-list" style="margin-top: 12px; font-size: 0.9rem;">
                        <li><code>valid_from DATE</code></li>
                        <li><code>valid_until DATE</code></li>
                        <li><code>is_current BOOLEAN</code></li>
                    </ul>
                </div>
                <div class="card">
                    <h4>Auto-update Trigger</h4>
                    <p style="font-size: 0.9rem; margin-top: 8px;">
                        When new <code>works_at</code> or <code>role_is</code> is added with <code>is_current=true</code>,
                        old ones are marked as <code>is_current=false</code>.
                    </p>
                </div>
                <div class="card">
                    <h4>Extraction Prompt</h4>
                    <p style="font-size: 0.9rem; margin-top: 8px;">
                        LLM extracts temporal markers: "works at" vs "used to work at" vs "worked at in 2015"
                    </p>
                </div>
            </div>
        </div>

        <!-- Slide 7: Phase 4 - RFM Model -->
        <div class="slide" data-slide="7">
            <div class="phase-header">
                <span class="phase-number">4</span>
                <div>
                    <span class="badge badge-p1">P1 Important</span>
                    <h2 style="margin-bottom: 0; margin-top: 8px;">RFM Model</h2>
                </div>
            </div>

            <p style="text-align: center; max-width: 700px; margin-bottom: 30px;">
                Critical for answering "who do I know well enough to ask for help?"
            </p>

            <div class="rfm-calculator">
                <div class="rfm-sliders">
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Recency</span>
                            <span id="recency-value">50</span>
                        </div>
                        <input type="range" id="recency-slider" min="0" max="100" value="50">
                        <p style="font-size: 0.75rem; color: var(--text-muted);">When did we last interact?</p>
                    </div>
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Frequency</span>
                            <span id="frequency-value">50</span>
                        </div>
                        <input type="range" id="frequency-slider" min="0" max="100" value="50">
                        <p style="font-size: 0.75rem; color: var(--text-muted);">How often do we interact?</p>
                    </div>
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Momentum</span>
                            <span id="momentum-value">50</span>
                        </div>
                        <input type="range" id="momentum-slider" min="0" max="100" value="50">
                        <p style="font-size: 0.75rem; color: var(--text-muted);">Is relationship growing/fading?</p>
                    </div>
                </div>

                <div class="rfm-result">
                    <div class="rfm-score" id="rfm-score">50</div>
                    <div class="rfm-tier tier-weak" id="rfm-tier">WEAK TIE</div>
                    <p style="margin-top: 20px; font-size: 0.9rem; text-align: center;">
                        <span class="var" style="color: var(--cyan);">score</span> =
                        <span class="num" style="color: var(--orange);">0.4</span> × R +
                        <span class="num" style="color: var(--orange);">0.4</span> × F +
                        <span class="num" style="color: var(--orange);">0.2</span> × M
                    </p>
                </div>
            </div>
        </div>

        <!-- Slide 8: Tie Strength (Granovetter) -->
        <div class="slide" data-slide="8">
            <h2>Tie Strength Theory</h2>
            <p class="subtitle">Granovetter's "Strength of Weak Ties" (1973)</p>

            <div class="granovetter-diagram">
                <div class="tie-group">
                    <h3 style="color: var(--green);">Strong Ties</h3>
                    <svg width="200" height="200" style="margin-top: 20px;">
                        <circle cx="100" cy="100" r="25" fill="url(#cyanGrad)" />
                        <text x="100" y="105" text-anchor="middle" fill="white" font-weight="600">YOU</text>

                        <line x1="100" y1="75" x2="100" y2="30" stroke="#10b981" stroke-width="4"/>
                        <circle cx="100" cy="20" r="15" fill="#10b981" />

                        <line x1="78" y1="85" x2="40" y2="50" stroke="#10b981" stroke-width="4"/>
                        <circle cx="30" cy="40" r="15" fill="#10b981" />

                        <line x1="122" y1="85" x2="160" y2="50" stroke="#10b981" stroke-width="4"/>
                        <circle cx="170" cy="40" r="15" fill="#10b981" />

                        <!-- Connections between strong ties -->
                        <line x1="40" y1="40" x2="100" y2="20" stroke="#10b981" stroke-width="2" stroke-dasharray="4"/>
                        <line x1="160" y1="40" x2="100" y2="20" stroke="#10b981" stroke-width="2" stroke-dasharray="4"/>

                        <defs>
                            <linearGradient id="cyanGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#00d9ff"/>
                                <stop offset="100%" style="stop-color:#a855f7"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <p style="font-size: 0.9rem; max-width: 180px; text-align: center;">
                        Same information bubble.<br>Redundant paths.
                    </p>
                </div>

                <div style="font-size: 3rem; color: var(--text-muted);">vs</div>

                <div class="tie-group">
                    <h3 style="color: var(--purple);">Weak Ties</h3>
                    <svg width="200" height="200" style="margin-top: 20px;">
                        <circle cx="50" cy="100" r="25" fill="url(#cyanGrad)" />
                        <text x="50" y="105" text-anchor="middle" fill="white" font-weight="600">YOU</text>

                        <!-- Bridge -->
                        <line x1="75" y1="100" x2="125" y2="100" stroke="#a855f7" stroke-width="2" stroke-dasharray="5"/>
                        <circle cx="140" cy="100" r="15" fill="#a855f7" />

                        <!-- New network -->
                        <line x1="155" y1="100" x2="175" y2="70" stroke="#a855f7" stroke-width="3"/>
                        <circle cx="180" cy="60" r="12" fill="#a855f7" opacity="0.7"/>

                        <line x1="155" y1="100" x2="175" y2="130" stroke="#a855f7" stroke-width="3"/>
                        <circle cx="180" cy="140" r="12" fill="#a855f7" opacity="0.7"/>

                        <line x1="150" y1="88" x2="165" y2="50" stroke="#a855f7" stroke-width="3"/>
                        <circle cx="170" cy="40" r="12" fill="#a855f7" opacity="0.7"/>
                    </svg>
                    <p style="font-size: 0.9rem; max-width: 180px; text-align: center;">
                        <strong style="color: var(--purple);">Bridges to NEW networks.</strong><br>
                        Better for opportunities.
                    </p>
                </div>
            </div>

            <div class="card" style="max-width: 600px; margin-top: 40px;">
                <h4>Key Insight for Reasoning</h4>
                <p style="font-size: 0.9rem;">
                    "Maria is a weak tie (met at conference), but weak ties are often best for finding new opportunities -
                    she likely has access to <strong style="color: var(--purple);">different networks</strong> than you."
                </p>
            </div>
        </div>

        <!-- Slide 9: Phase 5 - Search Improvements -->
        <div class="slide" data-slide="9">
            <div class="phase-header">
                <span class="phase-number">5</span>
                <div>
                    <span class="badge badge-p2">P2 Enhancement</span>
                    <h2 style="margin-bottom: 0; margin-top: 8px;">Search & Ranking</h2>
                </div>
            </div>

            <p style="text-align: center; max-width: 700px; margin-bottom: 30px;">
                Composite ranking combining similarity, confidence, relationship strength, and recency
            </p>

            <div class="formula" style="max-width: 800px; text-align: center;">
                <span class="var">final_score</span> <span class="op">=</span>
                <span class="num">0.50</span> <span class="op">*</span> <span class="var">similarity</span> <span class="op">+</span>
                <span class="num">0.20</span> <span class="op">*</span> <span class="var">confidence</span> <span class="op">+</span>
                <span class="num">0.20</span> <span class="op">*</span> <span class="var">relationship</span> <span class="op">+</span>
                <span class="num">0.10</span> <span class="op">*</span> <span class="var">is_current</span>
            </div>

            <div class="card-grid" style="margin-top: 40px;">
                <div class="card">
                    <div class="card-icon">S</div>
                    <h4>Similarity (50%)</h4>
                    <p>pgvector cosine distance<br><code>1 - (embedding <=> query)</code></p>
                </div>
                <div class="card">
                    <div class="card-icon">C</div>
                    <h4>Confidence (20%)</h4>
                    <p>Assertion confidence 0-1<br>Set by LLM during extraction</p>
                </div>
                <div class="card">
                    <div class="card-icon">R</div>
                    <h4>Relationship (20%)</h4>
                    <p>RFM-based strength<br>From relationship_metrics table</p>
                </div>
                <div class="card">
                    <div class="card-icon">T</div>
                    <h4>Recency (10%)</h4>
                    <p>is_current boolean<br>+10% boost if still current</p>
                </div>
            </div>
        </div>

        <!-- Slide 10: Phase 6 - Edge Dynamics -->
        <div class="slide" data-slide="10">
            <div class="phase-header">
                <span class="phase-number">6</span>
                <div>
                    <span class="badge badge-p2">P2 Enhancement</span>
                    <h2 style="margin-bottom: 0; margin-top: 8px;">Edge Dynamics</h2>
                </div>
            </div>

            <p style="text-align: center; max-width: 700px; margin-bottom: 30px;">
                Edge weights should reflect actual interaction patterns, not be static
            </p>

            <div class="two-column" style="margin-top: 20px;">
                <div class="column">
                    <h3>New Edge Fields</h3>
                    <ul class="feature-list" style="margin-top: 16px;">
                        <li><code>evidence_count INT</code></li>
                        <li><code>last_evidence_at TIMESTAMPTZ</code></li>
                        <li><code>first_evidence_at TIMESTAMPTZ</code></li>
                    </ul>

                    <h3 style="margin-top: 30px;">Weight Formula</h3>
                    <div class="formula" style="font-size: 1rem;">
                        <span class="var">weight</span> <span class="op">=</span> <span class="function">min</span>(<span class="num">2.0</span>, <span class="num">0.5</span> <span class="op">+</span> <span class="function">ln</span>(<span class="var">evidence_count</span>) <span class="op">*</span> <span class="num">0.2</span>)
                    </div>
                </div>

                <div class="column">
                    <svg width="350" height="250" style="margin: 0 auto; display: block;">
                        <!-- Edge with weight 0.5 (1 evidence) -->
                        <line x1="80" y1="60" x2="180" y2="60" stroke="#606070" stroke-width="2"/>
                        <circle cx="60" cy="60" r="20" fill="#1a1a24" stroke="#606070" stroke-width="2"/>
                        <circle cx="200" cy="60" r="20" fill="#1a1a24" stroke="#606070" stroke-width="2"/>
                        <text x="130" y="45" text-anchor="middle" fill="#606070" font-size="12">1 evidence</text>
                        <text x="130" y="80" text-anchor="middle" fill="#606070" font-size="12">weight: 0.5</text>

                        <!-- Edge with weight 1.0 (5 evidences) -->
                        <line x1="80" y1="140" x2="180" y2="140" stroke="#a855f7" stroke-width="4"/>
                        <circle cx="60" cy="140" r="20" fill="#1a1a24" stroke="#a855f7" stroke-width="2"/>
                        <circle cx="200" cy="140" r="20" fill="#1a1a24" stroke="#a855f7" stroke-width="2"/>
                        <text x="130" y="125" text-anchor="middle" fill="#a855f7" font-size="12">5 evidences</text>
                        <text x="130" y="160" text-anchor="middle" fill="#a855f7" font-size="12">weight: 0.82</text>

                        <!-- Edge with weight 2.0 (max, 20+ evidences) -->
                        <line x1="80" y1="220" x2="180" y2="220" stroke="#00d9ff" stroke-width="6"/>
                        <circle cx="60" cy="220" r="20" fill="#1a1a24" stroke="#00d9ff" stroke-width="2"/>
                        <circle cx="200" cy="220" r="20" fill="#1a1a24" stroke="#00d9ff" stroke-width="2"/>
                        <text x="130" y="205" text-anchor="middle" fill="#00d9ff" font-size="12">20+ evidences</text>
                        <text x="130" y="240" text-anchor="middle" fill="#00d9ff" font-size="12">weight: 2.0 (max)</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Slide 11: Phase 7 - Centrality -->
        <div class="slide" data-slide="11">
            <div class="phase-header">
                <span class="phase-number">7</span>
                <div>
                    <span class="badge badge-p3">P3 Future</span>
                    <h2 style="margin-bottom: 0; margin-top: 8px;">Centrality Metrics</h2>
                </div>
            </div>

            <p style="text-align: center; max-width: 700px; margin-bottom: 40px;">
                Find bridge contacts and network hubs. Computed on-demand for MVP.
            </p>

            <div class="centrality-grid">
                <div class="centrality-card">
                    <h4>Degree Centrality</h4>
                    <p>How many connections does a person have?</p>
                    <div class="mini-graph">
                        <div class="mini-node"></div>
                        <div style="width: 20px; height: 2px; background: var(--text-muted);"></div>
                        <div class="mini-node highlight"></div>
                        <div style="width: 20px; height: 2px; background: var(--text-muted);"></div>
                        <div class="mini-node"></div>
                    </div>
                    <p style="font-size: 0.75rem; color: var(--cyan); margin-top: 8px;">out_degree + in_degree</p>
                </div>

                <div class="centrality-card">
                    <h4>Betweenness Centrality</h4>
                    <p>How often is a person on the shortest path between others?</p>
                    <svg width="150" height="80" style="margin: 10px auto; display: block;">
                        <circle cx="20" cy="40" r="12" fill="#1a1a24" stroke="#606070" stroke-width="2"/>
                        <circle cx="75" cy="40" r="15" fill="#00d9ff" stroke="#00d9ff" stroke-width="2"/>
                        <circle cx="130" cy="40" r="12" fill="#1a1a24" stroke="#606070" stroke-width="2"/>
                        <circle cx="75" cy="10" r="10" fill="#1a1a24" stroke="#606070" stroke-width="2"/>
                        <circle cx="75" cy="70" r="10" fill="#1a1a24" stroke="#606070" stroke-width="2"/>
                        <line x1="32" y1="40" x2="60" y2="40" stroke="#606070" stroke-width="2"/>
                        <line x1="90" y1="40" x2="118" y2="40" stroke="#606070" stroke-width="2"/>
                        <line x1="75" y1="25" x2="75" y2="55" stroke="#606070" stroke-width="2"/>
                    </svg>
                    <p style="font-size: 0.75rem; color: var(--cyan); margin-top: 8px;">Bridge contacts</p>
                </div>

                <div class="centrality-card">
                    <h4>Community Detection</h4>
                    <p>Find clusters of related people (Louvain algorithm)</p>
                    <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 20px;">Future: P3+</p>
                </div>

                <div class="centrality-card">
                    <h4>Trust Propagation</h4>
                    <p>Transitive trust with decay over path length</p>
                    <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 20px;">Future: P3+</p>
                </div>
            </div>
        </div>

        <!-- Slide 12: Implementation Timeline -->
        <div class="slide" data-slide="12">
            <h2>Implementation Timeline</h2>
            <p class="subtitle">4-week roadmap with P3 as future work</p>

            <div class="timeline" style="margin-top: 60px;">
                <div class="timeline-item active" data-week="1">
                    <span class="timeline-label">Week 1</span>
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <strong>Critical Fixes (P0)</strong><br>
                        Identity conflicts, Pre-dedup
                    </div>
                </div>
                <div class="timeline-item" data-week="2">
                    <span class="timeline-label">Week 2</span>
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <strong>Data Quality (P1)</strong><br>
                        Assertion dedup, Temporal model
                    </div>
                </div>
                <div class="timeline-item" data-week="3">
                    <span class="timeline-label">Week 3</span>
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <strong>Relationship Model (P1)</strong><br>
                        RFM, Tie strength
                    </div>
                </div>
                <div class="timeline-item" data-week="4">
                    <span class="timeline-label">Week 4</span>
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <strong>Search & Edges (P2)</strong><br>
                        Ranked search, Edge dynamics
                    </div>
                </div>
                <div class="timeline-item" data-week="5">
                    <span class="timeline-label">Future</span>
                    <div class="timeline-dot" style="background: var(--text-muted); border-color: var(--text-muted);"></div>
                    <div class="timeline-content">
                        <strong>Centrality (P3)</strong><br>
                        Betweenness, Community detection
                    </div>
                </div>
            </div>

            <div class="card-grid" style="margin-top: 120px;">
                <div class="card">
                    <h4>Critical Files</h4>
                    <ul class="feature-list" style="font-size: 0.85rem; margin-top: 8px;">
                        <li><code>api/process.py</code></li>
                        <li><code>services/dedup.py</code></li>
                        <li><code>agents/prompts.py</code></li>
                        <li><code>api/search.py</code></li>
                    </ul>
                </div>
                <div class="card">
                    <h4>Migrations</h4>
                    <ul class="feature-list" style="font-size: 0.85rem; margin-top: 8px;">
                        <li>identity_conflict_detection</li>
                        <li>assertion_dedup</li>
                        <li>temporal_model</li>
                        <li>relationship_strength</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 13: Research Sources -->
        <div class="slide" data-slide="13">
            <h2>Research & Inspiration</h2>
            <p class="subtitle">Industry practices and theoretical foundations</p>

            <div class="two-column" style="margin-top: 40px;">
                <div class="column">
                    <h3>Industry Practices</h3>
                    <div class="source-card">
                        <div class="source-icon">M</div>
                        <div class="source-info">
                            <h4>Monica CRM</h4>
                            <p>Activity timeline, relationship types, reminders</p>
                        </div>
                    </div>
                    <div class="source-card">
                        <div class="source-icon">C</div>
                        <div class="source-info">
                            <h4>Clay</h4>
                            <p>RFM model (Recency, Frequency, Momentum), waterfall enrichment</p>
                        </div>
                    </div>
                    <div class="source-card">
                        <div class="source-icon">F</div>
                        <div class="source-info">
                            <h4>Folk</h4>
                            <p>Flexible custom fields, smart lists</p>
                        </div>
                    </div>
                </div>

                <div class="column">
                    <h3>Theoretical Models</h3>
                    <div class="source-card">
                        <div class="source-icon" style="font-size: 16px;">G</div>
                        <div class="source-info">
                            <h4>Granovetter's Weak Ties (1973)</h4>
                            <p>Weak ties bridge different networks, crucial for opportunities</p>
                        </div>
                    </div>
                    <div class="source-card">
                        <div class="source-icon" style="font-size: 16px;">N</div>
                        <div class="source-info">
                            <h4>Network Centrality</h4>
                            <p>Betweenness, Degree, Closeness metrics</p>
                        </div>
                    </div>
                    <div class="source-card">
                        <div class="source-icon" style="font-size: 16px;">L</div>
                        <div class="source-info">
                            <h4>Louvain Algorithm</h4>
                            <p>Community detection for clustering</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 40px; max-width: 900px;">
                <h4>Current Model Stats</h4>
                <div style="display: flex; gap: 40px; margin-top: 16px; font-size: 0.9rem;">
                    <div><strong style="color: var(--cyan);">14</strong> predicates</div>
                    <div><strong style="color: var(--purple);">5</strong> identity namespaces</div>
                    <div><strong style="color: var(--green);">6</strong> edge types</div>
                </div>
            </div>
        </div>

        <!-- Slide 14: Summary -->
        <div class="slide" data-slide="14">
            <h2>Success Metrics</h2>
            <p class="subtitle">How we measure improvement</p>

            <div class="metrics-grid" style="margin-top: 40px;">
                <div class="metric-card">
                    <div class="metric-value">0</div>
                    <div class="metric-label">Identity Conflicts<br>(down from unknown)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">70%</div>
                    <div class="metric-label">Dedup Accuracy<br>(pre-insertion)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">&lt;5%</div>
                    <div class="metric-label">Duplicate Assertions<br>(after merge)</div>
                </div>
            </div>

            <div class="card-grid" style="margin-top: 40px;">
                <div class="card">
                    <h4>Data Quality</h4>
                    <ul class="feature-list" style="font-size: 0.9rem; margin-top: 8px;">
                        <li>No orphan records</li>
                        <li>Temporal accuracy</li>
                        <li>Unique assertions per person</li>
                    </ul>
                    <div class="progress-bar"><div class="progress-fill" style="--progress: 0%;"></div></div>
                </div>
                <div class="card">
                    <h4>Search Quality</h4>
                    <ul class="feature-list" style="font-size: 0.9rem; margin-top: 8px;">
                        <li>Relationship-aware ranking</li>
                        <li>Weak tie surfacing</li>
                        <li>Temporal relevance</li>
                    </ul>
                    <div class="progress-bar"><div class="progress-fill" style="--progress: 0%;"></div></div>
                </div>
                <div class="card">
                    <h4>User Value</h4>
                    <ul class="feature-list" style="font-size: 0.9rem; margin-top: 8px;">
                        <li>Non-obvious connections</li>
                        <li>"Who can help with X?"</li>
                        <li>Network insights</li>
                    </ul>
                    <div class="progress-bar"><div class="progress-fill" style="--progress: 0%;"></div></div>
                </div>
            </div>
        </div>

        <!-- Slide 15: Finale -->
        <div class="slide" data-slide="15">
            <h1 style="font-size: 3.5rem;">Ready to Build</h1>
            <p class="subtitle" style="margin-bottom: 40px;">AI-first Personal Network Memory</p>

            <div style="display: flex; gap: 30px; margin-bottom: 60px;">
                <div class="card" style="text-align: center; padding: 30px;">
                    <div style="font-size: 2.5rem; color: var(--cyan);">Week 1</div>
                    <p style="margin-top: 8px;">Start with P0 bugs</p>
                </div>
                <div class="card" style="text-align: center; padding: 30px;">
                    <div style="font-size: 2.5rem; color: var(--purple);">4 Weeks</div>
                    <p style="margin-top: 8px;">Full P0-P2 implementation</p>
                </div>
                <div class="card" style="text-align: center; padding: 30px;">
                    <div style="font-size: 2.5rem; color: var(--green);">7 Phases</div>
                    <p style="margin-top: 8px;">Complete data model evolution</p>
                </div>
            </div>

            <div class="card" style="max-width: 600px; text-align: center;">
                <h4>Next Steps</h4>
                <ol style="text-align: left; margin-top: 16px; padding-left: 20px;">
                    <li style="margin-bottom: 8px;">Apply identity_conflict_detection.sql migration</li>
                    <li style="margin-bottom: 8px;">Update process.py with conflict checking</li>
                    <li style="margin-bottom: 8px;">Add pre-insertion dedup to extraction pipeline</li>
                    <li>Test with real voice notes</li>
                </ol>
            </div>

            <p style="margin-top: 60px; color: var(--text-muted); font-size: 1rem;">
                Built with Supabase + Python + OpenAI + Telegram Mini App
            </p>
        </div>
    </div>

    <!-- Navigation -->
    <div class="nav-dots" id="nav-dots"></div>
    <div class="slide-counter"><span id="current-slide">1</span> / <span id="total-slides">15</span></div>
    <div class="keyboard-hint">
        <div class="key">Arrow Keys</div>
        <div class="key">Space</div>
    </div>

    <script>
        // Particle Background
        const particlesCanvas = document.getElementById('particles-canvas');
        const ctx = particlesCanvas.getContext('2d');

        function resizeParticles() {
            particlesCanvas.width = window.innerWidth;
            particlesCanvas.height = window.innerHeight;
        }
        resizeParticles();
        window.addEventListener('resize', resizeParticles);

        const particles = [];
        const particleCount = 80;

        for (let i = 0; i < particleCount; i++) {
            particles.push({
                x: Math.random() * particlesCanvas.width,
                y: Math.random() * particlesCanvas.height,
                vx: (Math.random() - 0.5) * 0.5,
                vy: (Math.random() - 0.5) * 0.5,
                radius: Math.random() * 2 + 1
            });
        }

        function drawParticles() {
            ctx.clearRect(0, 0, particlesCanvas.width, particlesCanvas.height);

            // Draw connections
            ctx.strokeStyle = 'rgba(0, 217, 255, 0.1)';
            ctx.lineWidth = 1;

            for (let i = 0; i < particles.length; i++) {
                for (let j = i + 1; j < particles.length; j++) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const dist = Math.sqrt(dx * dx + dy * dy);

                    if (dist < 150) {
                        ctx.beginPath();
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.globalAlpha = 1 - dist / 150;
                        ctx.stroke();
                    }
                }
            }

            // Draw particles
            ctx.globalAlpha = 1;
            particles.forEach(p => {
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(0, 217, 255, 0.6)';
                ctx.fill();

                // Update position
                p.x += p.vx;
                p.y += p.vy;

                if (p.x < 0 || p.x > particlesCanvas.width) p.vx *= -1;
                if (p.y < 0 || p.y > particlesCanvas.height) p.vy *= -1;
            });

            requestAnimationFrame(drawParticles);
        }
        drawParticles();

        // Network Graph for Title Slide
        const networkCanvas = document.getElementById('network-graph');
        if (networkCanvas) {
            const nctx = networkCanvas.getContext('2d');

            function resizeNetwork() {
                networkCanvas.width = window.innerWidth;
                networkCanvas.height = window.innerHeight;
            }
            resizeNetwork();
            window.addEventListener('resize', resizeNetwork);

            const nodes = [];
            const nodeCount = 20;

            for (let i = 0; i < nodeCount; i++) {
                nodes.push({
                    x: Math.random() * networkCanvas.width,
                    y: Math.random() * networkCanvas.height,
                    vx: (Math.random() - 0.5) * 1,
                    vy: (Math.random() - 0.5) * 1,
                    radius: Math.random() * 10 + 5,
                    color: Math.random() > 0.5 ? '#00d9ff' : '#a855f7'
                });
            }

            // Create edges
            const edges = [];
            for (let i = 0; i < nodeCount; i++) {
                const connections = Math.floor(Math.random() * 3) + 1;
                for (let j = 0; j < connections; j++) {
                    const target = Math.floor(Math.random() * nodeCount);
                    if (target !== i) {
                        edges.push({ from: i, to: target });
                    }
                }
            }

            function drawNetwork() {
                nctx.clearRect(0, 0, networkCanvas.width, networkCanvas.height);

                // Draw edges
                edges.forEach(e => {
                    nctx.beginPath();
                    nctx.moveTo(nodes[e.from].x, nodes[e.from].y);
                    nctx.lineTo(nodes[e.to].x, nodes[e.to].y);
                    nctx.strokeStyle = 'rgba(168, 85, 247, 0.2)';
                    nctx.lineWidth = 1;
                    nctx.stroke();
                });

                // Draw nodes
                nodes.forEach(n => {
                    nctx.beginPath();
                    nctx.arc(n.x, n.y, n.radius, 0, Math.PI * 2);
                    nctx.fillStyle = n.color;
                    nctx.globalAlpha = 0.3;
                    nctx.fill();
                    nctx.globalAlpha = 1;

                    // Update position
                    n.x += n.vx;
                    n.y += n.vy;

                    if (n.x < 0 || n.x > networkCanvas.width) n.vx *= -1;
                    if (n.y < 0 || n.y > networkCanvas.height) n.vy *= -1;
                });

                requestAnimationFrame(drawNetwork);
            }
            drawNetwork();
        }

        // Slide Navigation
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        let currentSlide = 1;

        document.getElementById('total-slides').textContent = totalSlides;

        // Create nav dots
        const navDots = document.getElementById('nav-dots');
        for (let i = 1; i <= totalSlides; i++) {
            const dot = document.createElement('div');
            dot.className = 'nav-dot' + (i === 1 ? ' active' : '');
            dot.dataset.slide = i;
            dot.addEventListener('click', () => goToSlide(i));
            navDots.appendChild(dot);
        }

        function goToSlide(n) {
            if (n < 1 || n > totalSlides) return;

            slides.forEach((slide, index) => {
                slide.classList.remove('active', 'prev');
                if (index + 1 === n) {
                    slide.classList.add('active');
                } else if (index + 1 < n) {
                    slide.classList.add('prev');
                }
            });

            document.querySelectorAll('.nav-dot').forEach((dot, index) => {
                dot.classList.toggle('active', index + 1 === n);
            });

            document.getElementById('current-slide').textContent = n;
            currentSlide = n;

            // Trigger animations for active slide
            const activeSlide = document.querySelector('.slide.active');
            activeSlide.querySelectorAll('.typing-code').forEach(code => {
                code.classList.remove('animate');
                void code.offsetWidth; // Trigger reflow
                code.classList.add('animate');
            });
        }

        function nextSlide() {
            goToSlide(currentSlide + 1);
        }

        function prevSlide() {
            goToSlide(currentSlide - 1);
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextSlide();
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                prevSlide();
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                goToSlide(1);
            } else if (e.key === 'ArrowDown') {
                e.preventDefault();
                goToSlide(totalSlides);
            }
        });

        // Touch navigation
        let touchStartX = 0;
        document.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
        });

        document.addEventListener('touchend', (e) => {
            const touchEndX = e.changedTouches[0].clientX;
            const diff = touchStartX - touchEndX;

            if (Math.abs(diff) > 50) {
                if (diff > 0) {
                    nextSlide();
                } else {
                    prevSlide();
                }
            }
        });

        // RFM Calculator
        const recencySlider = document.getElementById('recency-slider');
        const frequencySlider = document.getElementById('frequency-slider');
        const momentumSlider = document.getElementById('momentum-slider');

        function updateRFM() {
            const r = parseInt(recencySlider.value);
            const f = parseInt(frequencySlider.value);
            const m = parseInt(momentumSlider.value);

            document.getElementById('recency-value').textContent = r;
            document.getElementById('frequency-value').textContent = f;
            document.getElementById('momentum-value').textContent = m;

            const score = Math.round(r * 0.4 + f * 0.4 + m * 0.2);
            document.getElementById('rfm-score').textContent = score;

            const tierEl = document.getElementById('rfm-tier');
            tierEl.classList.remove('tier-strong', 'tier-weak', 'tier-dormant');

            if (score >= 60) {
                tierEl.textContent = 'STRONG TIE';
                tierEl.classList.add('tier-strong');
            } else if (score >= 30) {
                tierEl.textContent = 'WEAK TIE';
                tierEl.classList.add('tier-weak');
            } else {
                tierEl.textContent = 'DORMANT';
                tierEl.classList.add('tier-dormant');
            }
        }

        if (recencySlider) {
            recencySlider.addEventListener('input', updateRFM);
            frequencySlider.addEventListener('input', updateRFM);
            momentumSlider.addEventListener('input', updateRFM);
        }

        // Timeline interaction
        document.querySelectorAll('.timeline-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.timeline-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Flip cards
        document.querySelectorAll('.flip-card').forEach(card => {
            card.addEventListener('click', function() {
                this.classList.toggle('flipped');
            });
        });

        // Progress bars animation on slide entry
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.querySelectorAll('.progress-fill').forEach((bar, index) => {
                        setTimeout(() => {
                            bar.style.setProperty('--progress', '100%');
                        }, index * 200);
                    });
                }
            });
        });

        document.querySelectorAll('.slide').forEach(slide => {
            observer.observe(slide);
        });
    </script>
</body>
</html>
